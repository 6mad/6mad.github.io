<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-cn">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Changes in HEADChanges fixed as part of the switch to zle-line-pre-redrawThe changes in this section were fixed by switching to a zle-line-pre-redraw-basedimplementation. Note: The new implementation">
<meta property="og:type" content="article">
<meta property="og:title" content="changelog">
<meta property="og:url" content="https://fftu.tk/2021/05/05/changelog/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:description" content="Changes in HEADChanges fixed as part of the switch to zle-line-pre-redrawThe changes in this section were fixed by switching to a zle-line-pre-redraw-basedimplementation. Note: The new implementation">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-05-05T13:11:07.099Z">
<meta property="article:modified_time" content="2021-05-05T13:11:07.100Z">
<meta property="article:author" content="6mad">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://fftu.tk/2021/05/05/changelog/"/>





  <title>changelog | 我的博客</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">我在 CODING 部署的 Hexo 博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fftu.tk/2021/05/05/changelog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="6mad">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">changelog</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-05-05T21:11:07+08:00">
                2021-05-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2021/05/05/changelog/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2021/05/05/changelog/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Changes-in-HEAD"><a href="#Changes-in-HEAD" class="headerlink" title="Changes in HEAD"></a>Changes in HEAD</h1><h2 id="Changes-fixed-as-part-of-the-switch-to-zle-line-pre-redraw"><a href="#Changes-fixed-as-part-of-the-switch-to-zle-line-pre-redraw" class="headerlink" title="Changes fixed as part of the switch to zle-line-pre-redraw"></a>Changes fixed as part of the switch to zle-line-pre-redraw</h2><p>The changes in this section were fixed by switching to a <code>zle-line-pre-redraw</code>-based<br>implementation.</p>
<p>Note: The new implementation will only be used on future zsh releases,<br>numbered 5.8.0.3 and newer, due to interoperability issues with other plugins<br>(issues #418 and #579).  The underlying zsh feature has been available since<br>zsh 5.2.</p>
<p>Whilst under development, the new implementation was known as the<br>“feature/redrawhook” topic branch.</p>
<ul>
<li><p>Fixed: Highlighting not triggered after popping a buffer from the buffer stack<br>(using the <code>push-line</code> widget, default binding: <code>M-q</code>)<br>[#40]</p>
</li>
<li><p>Fixed: Invoking completion when there were no matches removed highlighting<br>[#90, #470]</p>
</li>
<li><p>Fixed: Two successive deletes followed by a yank only yanked the latest<br>delete, rather than both of them<br>[#150, #151, #160; cf. #183]</p>
</li>
<li><p>Presumed fixed: Completing <code>$(xsel)</code> results in an error message from <code>xsel</code>,<br>with pre-2017 versions of <code>xsel</code>.  (For 2017 vintage and newer, see the issue<br>for details.)<br>[#154]</p>
</li>
<li><p>Fixed: When the standard <code>bracketed-paste-magic</code> widget is in use, pastes were slow<br>[#295]</p>
</li>
<li><p>Fixed: No way to prevent a widget from being wrapped<br>[#324]</p>
</li>
<li><p>Fixed: No highlighting while cycling menu completion<br>[#375]</p>
</li>
<li><p>Fixed: Does not coexist with the <code>IGNORE_EOF</code> option<br>[#377]</p>
</li>
<li><p>Fixed: The <code>undefined-key</code> widget was wrapped<br>[#421]</p>
</li>
<li><p>Fixed: Does not coexist with the standard <code>surround</code> family of widgets<br>[#520]</p>
</li>
<li><p>Fixed: First completed filename doesn’t get <code>path</code> highlighting<br>[#632]</p>
</li>
</ul>
<h2 id="Other-changes"><a href="#Other-changes" class="headerlink" title="Other changes"></a>Other changes</h2><ul>
<li>Add issue #712 to the previous release’s changelog (hereinafter).</li>
</ul>
<h1 id="Changes-in-0-8-0-alpha1-pre-redrawhook"><a href="#Changes-in-0-8-0-alpha1-pre-redrawhook" class="headerlink" title="Changes in 0.8.0-alpha1-pre-redrawhook"></a>Changes in 0.8.0-alpha1-pre-redrawhook</h1><h2 id="Notice-about-an-improbable-but-not-impossible-forward-incompatibility"><a href="#Notice-about-an-improbable-but-not-impossible-forward-incompatibility" class="headerlink" title="Notice about an improbable-but-not-impossible forward incompatibility"></a>Notice about an improbable-but-not-impossible forward incompatibility</h2><p>Everyone can probably skip this section.</p>
<p>The <code>master</code> branch of zsh-syntax-highlighting uses a zsh feature that has not<br>yet appeared in a zsh release: the <code>memo=</code> feature, added to zsh in commit<br>zsh-5.8-172-gdd6e702ee (after zsh 5.8, before zsh 5.9).  In the unlikely event<br>that this zsh feature should change in an incompatible way before the next<br>stable zsh release, set <code>zsh_highlight__memo_feature=0</code> in your .zshrc files to<br>disable use of the new feature.</p>
<p>z-sy-h dogfoods the new, unreleased zsh feature because that feature was<br>added to zsh at z-sy-h’s initiative.  The new feature is used in the fix<br>to issue #418.</p>
<h2 id="Incompatible-changes"><a href="#Incompatible-changes" class="headerlink" title="Incompatible changes:"></a>Incompatible changes:</h2><ul>
<li><p>An unsuccessful completion (a <kbd>⮀ Tab</kbd> press that doesn’t change the<br>command line) no longer causes highlighting to be lost.  Visual feedback can<br>alternatively be achieved by setting the <code>format</code> zstyle under the <code>warnings</code><br>tag, for example,</p>
<pre><code>zstyle &apos;:completion:*:warnings&apos; format &apos;%F{red}No matches%f&apos;</code></pre><p>  Refer to the [description of the <code>format</code> style in <code>zshcompsys(1)</code>]<br>  <a href="http://zsh.sourceforge.net/Doc/Release/Completion-System.html#index-format_002c-completion-style" target="_blank" rel="noopener">zshcompsys-Standard-Styles-format</a>.</p>
<p>  (#90, part of #245 (feature/redrawhook))</p>
</li>
</ul>
<h2 id="Other-changes-1"><a href="#Other-changes-1" class="headerlink" title="Other changes:"></a>Other changes:</h2><ul>
<li><p>Document <code>$ZSH_HIGHLIGHT_MAXLENGTH</code>.<br>[#698]</p>
</li>
<li><p>Optimize highlighting unquoted words (words that are not in single quotes, double quotes, backticks, or dollar-single-quotes)<br>[#730]</p>
</li>
<li><p>Redirection operators (e.g., <code>&lt;</code> and <code>&gt;</code>) are now highlighted by default<br>[#646]</p>
</li>
<li><p>Propertly terminate <code>noglob</code> scope in try/always blocks<br>[#577]</p>
</li>
<li><p>Don’t error out when <code>KSH_ARRAYS</code> is set in the calling scope<br>[#622, #689]</p>
</li>
<li><p>Literal semicolons in array assignments (<code>foo=( bar ; baz )</code>) are now<br>highlighted as errors.<br>[3ca93f864fb6]</p>
</li>
<li><p>Command separators in array assignments (<code>foo=( bar | baz )</code>) are now<br>highlighted as errors.<br>[#651, 81267ca3130c]</p>
</li>
<li><p>Support parameter elision in command position (e.g., <code>$foo ls</code> where <code>$foo</code> is unset or empty)<br>[#667]</p>
</li>
<li><p>Don’t consider the filename in <code>sudo -e /path/to/file</code> to be a command position<br>[#678]</p>
</li>
<li><p>Don’t look up absolute directory names in $cdpath<br>[2cc2583f8f12, part of #669]</p>
</li>
<li><p>Fix <code>exec 2&gt;&amp;1;</code> being highlighted as an error.<br>[#676]</p>
</li>
<li><p>Fix <code>: $(&lt;*)</code> being highlighted as globbing.<br>[#582]</p>
</li>
<li><p>Fix <code>cat &lt; *</code> being highlighting as globbing when the <code>MULTIOS</code> option is unset.<br>[#583]</p>
</li>
<li><p>Fix <code>echo &gt;&amp;2</code> highlighting the <code>2</code> as a filename if a file by that name happened to exist<br>[#694, part of #645]</p>
</li>
<li><p>Fix <code>echo &gt;&amp;-</code> highlighting the <code>-</code> as a filename if a file by that name happened to exist<br>[part of #645]</p>
</li>
<li><p>Fix <code>echo &gt;&amp;p</code> highlighting the <code>p</code> as a filename if a file by that name happened to exist<br>[part of #645]</p>
</li>
<li><p>Fix wrong highlighting of unquoted parameter expansions under zsh 5.2 and older<br>[e165f18c758e]</p>
</li>
<li><p>Highlight global aliases<br>[#700]</p>
</li>
<li><p>Highlight <code>: =nosuchcommand&#39; as an error (when the</code>EQUALS` option hasn’t been unset).<br>[#430]</p>
</li>
<li><p>Highlight reserved word after assignments as errors (e.g., <code>foo=bar (ls;)</code>)<br>[#461]</p>
</li>
<li><p>Correctly highlight <code>[[ foo &amp;&amp; bar || baz ]]</code>.</p>
</li>
<li><p>Highlight non-executable files in command position correctly (e.g., <code>% /etc/passwd</code>)<br>[#202, #669]</p>
</li>
<li><p>Highlight directories in command position correctly, including <code>AUTO_CD</code> support<br>[#669]</p>
</li>
<li><p>Recognize <code>env</code> as a precommand (e.g., <code>env FOO=bar ls</code>)</p>
</li>
<li><p>Recognize <code>strace</code> as a precommand</p>
</li>
<li><p>Fix an error message on stderr before every prompt when the <code>WARN_NESTED_VAR</code> zsh option is set:<br><code>_zsh_highlight_main__precmd_hook:1: array parameter _zsh_highlight_main__command_type_cache set in enclosing scope in function _zsh_highlight_main__precmd_hook</code><br>[#727, #731, #732, #733]</p>
</li>
<li><p>Fix highlighting of alias whose definitions use a simple command terminator<br>(such as <code>;</code>, <code>|</code>, <code>&amp;&amp;</code>) before a newline<br>[#677; had regressed in 0.7.0]</p>
</li>
<li><p>Highlight arithmetic expansions (e.g., <code>$(( 42 ))</code>)<br>[#607 #649 #704]</p>
</li>
<li><p>Highlight the parentheses of array assignments as reserved words (<code>foo=( bar )</code>).<br>The <code>assign</code> style remains supported and has precedence.<br>[#585]</p>
</li>
<li><p>Fix interoperability issue with other plugins that use highlighting.  The fix<br>requires zsh 5.8.0.3 or newer.  (zsh 5.8.0.2-dev from the <code>master</code> branch,<br>revision zsh-5.8-172-gdd6e702ee or newer is also fine.)<br>[#418, <a href="https://github.com/okapia/zsh-viexchange/issues/1]" target="_blank" rel="noopener">https://github.com/okapia/zsh-viexchange/issues/1]</a></p>
</li>
<li><p>Improve performance of the <code>brackets</code> highlighter.</p>
</li>
<li><p>Fix highlighting of pre-command redirections (e.g., the <code>$fn</code> in <code>&lt;$fn cat</code>)<br>[#712]</p>
</li>
</ul>
<h1 id="Changes-in-version-0-7-1"><a href="#Changes-in-version-0-7-1" class="headerlink" title="Changes in version 0.7.1"></a>Changes in version 0.7.1</h1><ul>
<li>Remove out-of-date information from the 0.7.0 changelog.</li>
</ul>
<h1 id="Changes-in-version-0-7-0"><a href="#Changes-in-version-0-7-0" class="headerlink" title="Changes in version 0.7.0"></a>Changes in version 0.7.0</h1><p>This is a stable bugfix and feature release.  Major new features and changes include:</p>
<ul>
<li><p>Add <code>ZSH_HIGHLIGHT_DIRS_BLACKLIST</code> to disable “path” and “path prefix”<br>highlighting for specific directories<br>[#379]</p>
</li>
<li><p>Add the “regexp” highlighter, modelled after the pattern highlighter<br>[4e6f60063f1c]</p>
</li>
<li><p>When a word uses globbing, only the globbing metacharacters will be highlighted as globbing:<br>in <code>: foo*bar</code>, only the <code>*</code> will be blue.<br>[e48af357532c]</p>
</li>
<li><p>Highlight pasted quotes (e.g., <code>: foo&quot;bar&quot;</code>)<br>[dc1b2f6fa4bb]</p>
</li>
<li><p>Highlight command substitutions (<code>: `ls`</code>, <code>: $(ls)</code>)<br>[c0e64fe13178 and parents, e86f75a840e7, et al]</p>
</li>
<li><p>Highlight process substitutions (<code>: &gt;(nl)</code>, <code>: &lt;(pwd)</code>, <code>: =(git diff)</code>)<br>[c0e64fe13178 and parents, e86f75a840e7, et al]</p>
</li>
<li><p>Highlight command substitutions inside double quotes (<code>: &quot;`foo`&quot;</code>)<br>[f16e858f0c83]</p>
</li>
<li><p>Highlight many precommands (e.g., <code>nice</code>, <code>stdbuf</code>, <code>eatmydata</code>;<br>see <code>$precommand_options</code> in the source)</p>
</li>
<li><p>Highlight numeric globs (e.g., <code>echo /lib&lt;-&gt;</code>)</p>
</li>
<li><p>Assorted improvements to aliases highlighting<br>(e.g.,<br> <code>alias sudo_u=&#39;sudo -u&#39;; sudo_u jrandom ls</code>,<br> <code>alias x=y y=z z=nosuchcommand; x</code>,<br> <code>alias ls=&#39;ls -l&#39;; \ls</code>)<br>[f3410c5862fc, 57386f30aec8, #544, and many others]</p>
</li>
<li><p>Highlight some more syntax errors<br>[dea05e44e671, 298ef6a2fa30]</p>
</li>
<li><p>New styles: named file descriptors, <code>RC_QUOTES</code>, and unclosed quotes (e.g., <code>echo &quot;foo&lt;CURSOR&gt;</code>)<br>[38c794a978cd, 25ae1c01216c, 967335dfc5fd]</p>
</li>
<li><p>The ‘brackets’ highlighting no longer treats quotes specially.<br>[ecdda36ef56f]</p>
</li>
</ul>
<p>Selected bugfixes include:</p>
<ul>
<li><p>Highlight <code>sudo</code> correctly when it’s not installed<br>[26a82113b08b]</p>
</li>
<li><p>Handle some non-default options being set in zshrc<br>[b07ada1255b7, a2a899b41b8, 972ad197c13d, b3f66fc8748f]</p>
</li>
<li><p>Fix off-by-one highlighting in vi “visual” mode (vicmd keymap)<br>[be3882aeb054]</p>
</li>
<li><p>The ‘yank-pop’ widget is not wrapped<br>[#183]</p>
</li>
</ul>
<p>Known issues include:</p>
<ul>
<li>A multiline alias that uses a simple command terminator (such as <code>;</code>, <code>|</code>, <code>&amp;&amp;</code>)<br>before a newline will incorrectly be highlighted as an error.  See issue #677<br>for examples and workarounds.<br>[#677]<br>[UPDATE: Fixed in 0.8.0]</li>
</ul>
<h1 id="Changes-in-version-0-6-0"><a href="#Changes-in-version-0-6-0" class="headerlink" title="Changes in version 0.6.0"></a>Changes in version 0.6.0</h1><p>This is a stable release, featuring bugfixes and minor improvements.</p>
<h2 id="Performance-improvements"><a href="#Performance-improvements" class="headerlink" title="Performance improvements:"></a>Performance improvements:</h2><p>(none)</p>
<h2 id="Added-highlighting-of"><a href="#Added-highlighting-of" class="headerlink" title="Added highlighting of:"></a>Added highlighting of:</h2><ul>
<li>The <code>isearch</code> and <code>suffix</code> <a href="http://zsh.sourceforge.net/Doc/Release/Zsh-Line-Editor.html#Character-Highlighting" target="_blank" rel="noopener"><code>$zle_highlight</code> settings</a>.<br>(79e4d3d12405, 15db71abd0cc, b56ee542d619; requires zsh 5.3 for <code>$ISEARCHMATCH_ACTIVE</code> / <code>$SUFFIX_ACTIVE</code> support)</li>
</ul>
<ul>
<li><p>Possible history expansions in double-quoted strings.<br>(76ea9e1df316)</p>
</li>
<li><p>Mismatched <code>if</code>/<code>then</code>/<code>elif</code>/<code>else</code>/<code>fi</code>.<br>(73cb83270262)</p>
</li>
</ul>
<h2 id="Fixed-highlighting-of"><a href="#Fixed-highlighting-of" class="headerlink" title="Fixed highlighting of:"></a>Fixed highlighting of:</h2><ul>
<li><p>A comment line followed by a non-comment line.<br>(#385, 9396ad5c5f9c)</p>
</li>
<li><p>An unquoted <code>$*</code> (expands to the positional parameters).<br>(237f89ad629f)</p>
</li>
<li><p>history-incremental-pattern-search-backward under zsh 5.3.1.<br>(#407, #415, 462779629a0c)</p>
</li>
</ul>
<h2 id="API-changes-for-highlighter-authors"><a href="#API-changes-for-highlighter-authors" class="headerlink" title="API changes (for highlighter authors):"></a>API changes (for highlighter authors):</h2><p>(none)</p>
<h2 id="Developer-visible-changes"><a href="#Developer-visible-changes" class="headerlink" title="Developer-visible changes:"></a>Developer-visible changes:</h2><ul>
<li>tests: Set the <code>ALIAS_FUNC_DEF</code> option for zsh 5.4 compatibility.<br>(9523d6d49cb3)</li>
</ul>
<h2 id="Other-changes-2"><a href="#Other-changes-2" class="headerlink" title="Other changes:"></a>Other changes:</h2><ul>
<li><p>docs: Added before/after screenshots.<br>(cd9ec14a65ec..b7e277106b49)</p>
</li>
<li><p>docs: Link Fedora package.<br>(3d74aa47e4a7, 5feed23962df)</p>
</li>
<li><p>docs: Link FreeBSD port.<br>(626c034c68d7)</p>
</li>
<li><p>docs: Link OpenSUSE Build Service packages<br>(#419, dea1fedc7358)</p>
</li>
<li><p>Prevent user-defined aliases from taking effect in z-sy-h’s own code.<br>(#390, 2dce602727d7, 8d5afe47f774; and #392, #395, b8fa1b9dc954)</p>
</li>
<li><p>docs: Update zplug installation instructions.<br>(#399, 4f49c4a35f17)</p>
</li>
<li><p>Improve “unhandled ZLE widget ‘foo’” error message.<br>(#409, be083d7f3710)</p>
</li>
<li><p>Fix printing of “failed loading highlighters” error message.<br>(#426, ad522a091429)</p>
</li>
</ul>
<h1 id="Changes-in-version-0-5-0"><a href="#Changes-in-version-0-5-0" class="headerlink" title="Changes in version 0.5.0"></a>Changes in version 0.5.0</h1><h2 id="Performance-improvements-1"><a href="#Performance-improvements-1" class="headerlink" title="Performance improvements:"></a>Performance improvements:</h2><p>We thank Sebastian Gniazdowski and “m0viefreak” for significant contributions<br>in this area.</p>
<ul>
<li><p>Optimize string operations in the <code>main</code> (default) highlighter.<br>(#372/3cb58fd7d7b9, 02229ebd6328, ef4bfe5bcc14, #372/c6b6513ac0d6, #374/15461e7d21c3)</p>
</li>
<li><p>Command word highlighting:  Use the <code>zsh/parameter</code> module to avoid forks.<br>Memoize (cache) the results.<br>(#298, 3ce01076b521, 2f18ba64e397, 12b879caf7a6; #320, 3b67e656bff5)</p>
</li>
<li><p>Avoid forks in the driver and in the <code>root</code> highlighter.<br>(b9112aec798a, 38c8fbea2dd2)</p>
</li>
</ul>
<h2 id="Added-highlighting-of-1"><a href="#Added-highlighting-of-1" class="headerlink" title="Added highlighting of:"></a>Added highlighting of:</h2><ul>
<li><p><code>pkexec</code> (a precommand).<br>(#248, 4f3910cbbaa5)</p>
</li>
<li><p>Aliases that cannot be defined normally nor invoked normally (highlighted as an error).<br>(#263 (in part), 28932316cca6)</p>
</li>
<li><p>Path separators (<code>/</code>) — the default behaviour remains to highlight path separators<br>and path components the same way.<br>(#136, #260, 6cd39e7c70d3, 9a934d291e7c, f3d3aaa00cc4)</p>
</li>
<li><p>Assignments to individual positional arguments (<code>42=foo</code> to assign to <code>$42</code>).<br>(f4036a09cee3)</p>
</li>
<li><p>Linewise region (the <code>visual-line-mode</code> widget, bound to <code>V</code> in zsh’s <code>vi</code> keymap).<br>(#267, a7a7f8b42280, ee07588cfd9b)</p>
</li>
<li><p>Command-lines recalled by <code>isearch</code> mode; requires zsh≥5.3.<br>(#261 (in part); #257; 4ad311ec0a68)</p>
</li>
<li><p>Command-lines whilst the <code>IGNORE_BRACES</code> or <code>IGNORE_CLOSE_BRACES</code> option is in effect.<br>(a8a6384356af, 02807f1826a5)</p>
</li>
<li><p>Mismatched parentheses and braces (in the <code>main</code> highlighter).<br>(51b9d79c3bb6, 2fabf7ca64b7, a4196eda5e6f, and others)</p>
</li>
<li><p>Mismatched <code>do</code>/<code>done</code> keywords.<br>(b2733a64da93)</p>
</li>
<li><p>Mismatched <code>foreach</code>/<code>end</code> keywords.<br>(#96, 2bb8f0703d8f)</p>
</li>
<li><p>In Bourne-style function definitions, when the <code>MULTI_FUNC_DEF</code> option is set<br>(which is the default), highlight the first word in the function body as<br>a command word: <code>f() { g &quot;$@&quot; }</code>.<br>(6f91850a01e1)</p>
</li>
<li><p><code>always</code> blocks.<br>(#335, e5782e4ddfb6)</p>
</li>
<li><p>Command substitutions inside double quotes, <code>&quot;$(echo foo)&quot;</code>.<br>(#139 (in part), c3913e0d8ead)</p>
</li>
<li><p>Non-alphabetic parameters inside double quotes (<code>&quot;$$&quot;</code>, <code>&quot;$#&quot;</code>, <code>&quot;$*&quot;</code>, <code>&quot;$@&quot;</code>, <code>&quot;$?&quot;</code>, <code>&quot;$-&quot;</code>).<br>(4afe670f7a1b, 44ef6e38e5a7)</p>
</li>
<li><p>Command words from future versions of zsh (forward compatibly).<br>This also adds an <code>arg0</code> style that all other command word styles fall back to.<br>(b4537a972eed, bccc3dc26943)</p>
</li>
<li><p>Escaped history expansions inside double quotes: <code>: &quot;\!&quot;</code><br>(28d7056a7a06, et seq)</p>
</li>
</ul>
<h2 id="Fixed-highlighting-of-1"><a href="#Fixed-highlighting-of-1" class="headerlink" title="Fixed highlighting of:"></a>Fixed highlighting of:</h2><ul>
<li><p>Command separator tokens in syntactically-invalid positions.<br>(09c4114eb980)</p>
</li>
<li><p>Redirections with a file descriptor number at command word.<br>(#238 (in part), 73ee7c1f6c4a)</p>
</li>
<li><p>The <code>select</code> prompt, <code>$PS3</code>.<br>(#268, 451665cb2a8b)</p>
</li>
<li><p>Values of variables in <code>vared</code>.<br>(e500ca246286)</p>
</li>
<li><p><code>!</code> as an argument (neither a history expansion nor a reserved word).<br>(4c23a2fd1b90)</p>
</li>
<li><p>“division by zero” error under the <code>brackets</code> highlighter when <code>$ZSH_HIGHLIGHT_STYLES</code> is empty.<br>(f73f3d53d3a6)</p>
</li>
<li><p>Process substitutions, <code>&lt;(pwd)</code> and <code>&gt;(wc -l)</code>.<br>(#302, 6889ff6bd2ad, bfabffbf975c, fc9c892a3f15)</p>
</li>
<li><p>The non-<code>SHORT_LOOPS</code> form of <code>repeat</code> loops: <code>repeat 42; do true; done</code>.<br>(#290, 4832f18c50a5, ef68f50c048f, 6362c757b6f7)</p>
</li>
<li><p>Broken symlinks (are now highlighted as files).<br>(#342, 95f7206a9373, 53083da8215e)</p>
</li>
<li><p>Lines accepted from <code>isearch</code> mode.<br>(#284; #257, #259, #288; 5bae6219008b, a8fe22d42251)</p>
</li>
<li><p>Work around upstream bug that triggered when the command word was a relative<br>path, that when interpreted relative to a $PATH directory denoted a command;<br>the effect of that upstream bug was that the relative path was cached as<br>a “valid external command name”.<br>(#354, #355, 51614ca2c994, fdaeec45146b, 7d38d07255e4;<br>upstream fix slated to be released in 5.3 (workers/39104))</p>
</li>
<li><p>After accepting a line with the cursor on a bracket, the matching bracket<br>of the bracket under the cursor no longer remains highlighted (with the<br><code>brackets</code> highlighter).<br>(4c4baede519a)</p>
</li>
<li><p>The first word on a new line within an array assignment or initialization is no<br>longer considered a command position.<br>(8bf423d16d46)</p>
</li>
<li><p>Subshells that end at command position, <code>(A=42)</code>, <code>(true;)</code>.<br>(#231, 7fb6f9979121; #344, 4fc35362ee5a)</p>
</li>
<li><p>Command word after array assignment, <code>a=(lorem ipsum) pwd</code>.<br>(#330, 7fb6f9979121)</p>
</li>
</ul>
<h2 id="API-changes-for-highlighter-authors-1"><a href="#API-changes-for-highlighter-authors-1" class="headerlink" title="API changes (for highlighter authors):"></a>API changes (for highlighter authors):</h2><ul>
<li><p>New interface <code>_zsh_highlight_add_highlight</code>.<br>(341a3ae1f015, c346f6eb6fb6)</p>
</li>
<li><p>tests: Specify the style key, not its value, in test expectations.<br>(a830613467af, fd061b5730bf, eaa4335c3441, among others)</p>
</li>
<li><p>Module author documentation improvements.<br>(#306 (in part), 217669270418, 0ff354b44b6e, 80148f6c8402, 364f206a547f, and others)</p>
</li>
<li><p>The driver no longer defines a <code>_zsh_highlight_${highlighter}_highlighter_cache</code><br>variable, which is in the highlighters’ namespace.<br>(3e59ab41b6b8, 80148f6c8402, f91a7b885e7d)</p>
</li>
<li><p>Rename highlighter entry points.  The old names remain supported for<br>backwards compatibility.<br>(a3d5dfcbdae9, c793e0dceab1)</p>
</li>
<li><p>tests: Add the “NONE” expectation.<br>(4da9889d1545, 13018f3dd735, d37c55c788cd)</p>
</li>
<li><p>tests: consider a test that writes to stderr to have failed.<br>(#291, 1082067f9315)</p>
</li>
</ul>
<h2 id="Developer-visible-changes-1"><a href="#Developer-visible-changes-1" class="headerlink" title="Developer-visible changes:"></a>Developer-visible changes:</h2><ul>
<li><p>Add <code>make quiet-test</code>.<br>(9b64ad750f35)</p>
</li>
<li><p>test harness: Better quote replaceables in error messages.<br>(30d8f92df225)</p>
</li>
<li><p>test harness: Fix exit code for XPASS.<br>(bb8d325c0cbd)</p>
</li>
<li><p>Create <a href="HACKING.md">HACKING.md</a>.<br>(cef49752fd0e)</p>
</li>
<li><p>tests: Emit a description for PASS test points.<br>(6aa57d60aa64, f0bae44b76dd)</p>
</li>
<li><p>tests: Create a script that generates a test file.<br>(8013dc3b8db6, et seq; <code>tests/generate.zsh</code>)</p>
</li>
</ul>
<h2 id="Other-changes-3"><a href="#Other-changes-3" class="headerlink" title="Other changes:"></a>Other changes:</h2><ul>
<li><p>Under zsh≤5.2, widgets whose names start with a <code>_</code> are no longer excluded<br>from highlighting.<br>(ed33d2cb1388; reverts part of 186d80054a40 which was for #65)</p>
</li>
<li><p>Under zsh≤5.2, widgets implemented by a function named after the widget are<br>no longer excluded from highlighting.<br>(487b122c480d; reverts part of 776453cb5b69)</p>
</li>
<li><p>Under zsh≤5.2, shell-unsafe widget names can now be wrapped.<br>(#278, 6a634fac9fb9, et seq)</p>
</li>
<li><p>Correct some test expectations.<br>(78290e043bc5)</p>
</li>
<li><p><code>zsh-syntax-highlighting.plugin.zsh</code>: Convert from symlink to plain file<br>for msys2 compatibility.<br>(#292, d4f8edc9f3ad)</p>
</li>
<li><p>Document installation under some plugin managers.<br>(e635f766bef9, 9cab566f539b)</p>
</li>
<li><p>Don’t leak the <code>PATH_DIRS</code> option.<br>(7b82b88a7166)</p>
</li>
<li><p>Don’t require the <code>FUNCTION_ARGZERO</code> option to be set.<br>(#338, 750aebc553f2)</p>
</li>
<li><p>Under zsh≤5.2, support binding incomplete/nonexistent widgets.<br>(9e569bb0fe04, part of #288)</p>
</li>
<li><p>Make the driver reentrant, fixing possibility of infinite recursion<br>under zsh≤5.2 under interaction with theoretical third-party code.<br>(#305, d711563fe1bf, 295d62ec888d, f3242cbd6aba)</p>
</li>
<li><p>Fix warnings when <code>WARN_CREATE_GLOBAL</code> is set prior to sourcing zsh-syntax-highlighting.<br>(z-sy-h already sets <code>WARN_CREATE_GLOBAL</code> internally.)<br>(da60234fb236)</p>
</li>
<li><p>Warn only once, rather than once per keypress, when a highlighter is unavailable.<br>(0a9b347483ae)</p>
</li>
</ul>
<h1 id="Changes-in-version-0-4-1"><a href="#Changes-in-version-0-4-1" class="headerlink" title="Changes in version 0.4.1"></a>Changes in version 0.4.1</h1><h2 id="Fixes"><a href="#Fixes" class="headerlink" title="Fixes:"></a>Fixes:</h2><ul>
<li>Arguments to widgets were not properly dash-escaped.  Only matters for widgets<br>that take arguments (i.e., that are invoked as <code>zle ${widget} -- ${args}</code>).<br>(282c7134e8ac, reverts c808d2187a73)</li>
</ul>
<h1 id="Changes-in-version-0-4-0"><a href="#Changes-in-version-0-4-0" class="headerlink" title="Changes in version 0.4.0"></a>Changes in version 0.4.0</h1><h2 id="Added-highlighting-of-2"><a href="#Added-highlighting-of-2" class="headerlink" title="Added highlighting of:"></a>Added highlighting of:</h2><ul>
<li><p>incomplete sudo commands<br>(a3047a912100, 2f05620b19ae)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo;</span><br><span class="line">sudo -u;</span><br></pre></td></tr></table></figure>
</li>
<li><p>command words following reserved words<br>(#207, #222, b397b12ac139 et seq, 6fbd2aa9579b et seq, 8b4adbd991b0)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ls; <span class="keyword">then</span> ls; <span class="keyword">else</span> ls; <span class="keyword">fi</span></span><br><span class="line">repeat 10 <span class="keyword">do</span> ls; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>  (The <code>ls</code> are now highlighted as a command.)</p>
</li>
<li><p>comments (when <code>INTERACTIVE_COMMENTS</code> is set)<br>(#163, #167, 693de99a9030)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> Hello <span class="comment"># comment</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>closing brackets of arithmetic expansion, subshells, and blocks<br>(#226, a59f442d2d34, et seq)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(( foo ))</span><br><span class="line">( foo )</span><br><span class="line">&#123; foo &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>command names enabled by the <code>PATH_DIRS</code> option<br>(#228, 96ee5116b182)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># When ~/bin/foo/bar exists, is executable, ~/bin is in $PATH,</span></span><br><span class="line"><span class="comment"># and 'setopt PATH_DIRS' is in effect</span></span><br><span class="line">foo/bar</span><br></pre></td></tr></table></figure>
</li>
<li><p>parameter expansions with braces inside double quotes<br>(#186, 6e3720f39d84)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;foo&#125;</span>"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>parameter expansions in command word<br>(#101, 4fcfb15913a2)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x=/bin/ls</span><br><span class="line"><span class="variable">$x</span> -l</span><br></pre></td></tr></table></figure>
</li>
<li><p>the command separators ‘|&amp;’, ‘&amp;!’, ‘&amp;|‘</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view file.pdf &amp;!  ls</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="Fixed-highlighting-of-2"><a href="#Fixed-highlighting-of-2" class="headerlink" title="Fixed highlighting of:"></a>Fixed highlighting of:</h2><ul>
<li><p>precommand modifiers at non-command-word position<br>(#209, 2c9f8c8c95fa)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls <span class="built_in">command</span> foo</span><br></pre></td></tr></table></figure>
</li>
<li><p>sudo commands with infix redirections<br>(#221, be006aded590, 86e924970911)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -u &gt;/tmp/foo.out user ls</span><br></pre></td></tr></table></figure>
</li>
<li><p>subshells; anonymous functions<br>(#166, #194, 0d1bfbcbfa67, 9e178f9f3948)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="literal">true</span>)</span><br><span class="line">() &#123; <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>parameter assignment statements with no command<br>(#205, 01d7eeb3c713)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A=1;</span><br></pre></td></tr></table></figure>

<p>  (The semicolon used to be highlighted as a mistake)</p>
</li>
<li><p>cursor highlighter: Remove the cursor highlighting when accepting a line.<br>(#109, 4f0c293fdef0)</p>
</li>
</ul>
<h2 id="Removed-features"><a href="#Removed-features" class="headerlink" title="Removed features:"></a>Removed features:</h2><ul>
<li>Removed highlighting of approximate paths (<code>path_approx</code>).<br>(#187, 98aee7f8b9a3)</li>
</ul>
<h2 id="Other-changes-4"><a href="#Other-changes-4" class="headerlink" title="Other changes:"></a>Other changes:</h2><ul>
<li><p>main highlighter refactored to use states rather than booleans.<br>(2080a441ac49, et seq)</p>
</li>
<li><p>Fix initialization when sourcing <code>zsh-syntax-highlighting.zsh</code> via a symlink<br>(083c47b00707)</p>
</li>
<li><p>docs: Add screenshot.<br>(57624bb9f64b)</p>
</li>
<li><p>widgets wrapping: Don’t add ‘–’ when invoking widgets.<br>(c808d2187a73) [_reverted in 0.4.1_]</p>
</li>
<li><p>Refresh highlighting upon <code>accept-*</code> widgets (<code>accept-line</code> et al).<br>(59fbdda64c21)</p>
</li>
<li><p>Stop leaking match/mbegin/mend to global scope (thanks to upstream<br><code>WARN_CREATE_GLOBAL</code> improvements).<br>(d3deffbf46a4)</p>
</li>
<li><p>‘make install’: Permit setting <code>$(SHARE_DIR)</code> from the environment.<br>(e1078a8b4cf1)</p>
</li>
<li><p>driver: Tolerate KSH_ARRAYS being set in the calling context.<br>(#162, 8f19af6b319d)</p>
</li>
<li><p>‘make install’: Install documentation fully and properly.<br>(#219, b1619c001390, et seq)</p>
</li>
<li><p>docs: Improve ‘main’ highlighter’s documentation.<br>(00de155063f5, 7d4252f5f596)</p>
</li>
<li><p>docs: Moved to a new docs/ tree; assorted minor updates<br>(c575f8f37567, 5b34c23cfad5, et seq)</p>
</li>
<li><p>docs: Split README.md into INSTALL.md<br>(0b3183f6cb9a)</p>
</li>
<li><p>driver: Report <code>$ZSH_HIGHLIGHT_REVISION</code> when running from git<br>(84734ba95026)</p>
</li>
</ul>
<h2 id="Developer-visible-changes-2"><a href="#Developer-visible-changes-2" class="headerlink" title="Developer-visible changes:"></a>Developer-visible changes:</h2><ul>
<li><p>Test harness converted to <a href="http://testanything.org/tap-specification.html" target="_blank" rel="noopener">TAP</a> format<br>(d99aa58aaaef, et seq)</p>
</li>
<li><p>Run each test in a separate subprocess, isolating them from each other<br>(d99aa58aaaef, et seq)</p>
</li>
<li><p>Fix test failure with nonexisting $HOME<br>(#216, b2ac98b98150)</p>
</li>
<li><p>Test output is now colorized.<br>(4d3da30f8b72, 6fe07c096109)</p>
</li>
<li><p>Document <code>make install</code><br>(a18a7427fd2c)</p>
</li>
<li><p>tests: Allow specifying the zsh binary to use.<br>(557bb7e0c6a0)</p>
</li>
<li><p>tests: Add ‘make perf’ target<br>(4513eaea71d7)</p>
</li>
<li><p>tests: Run each test in a sandbox directory<br>(c01533920245)</p>
</li>
</ul>
<h1 id="Changes-in-version-0-3-0"><a href="#Changes-in-version-0-3-0" class="headerlink" title="Changes in version 0.3.0"></a>Changes in version 0.3.0</h1><h2 id="Added-highlighting-of-3"><a href="#Added-highlighting-of-3" class="headerlink" title="Added highlighting of:"></a>Added highlighting of:</h2><ul>
<li><p>suffix aliases (requires zsh 5.1.1 or newer):</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> -s png=display</span><br><span class="line">foo.png</span><br></pre></td></tr></table></figure>
</li>
<li><p>prefix redirections:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;foo.txt cat</span><br></pre></td></tr></table></figure>
</li>
<li><p>redirection operators:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> &gt; foo.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>arithmetic evaluations:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(( 42 ))</span><br></pre></td></tr></table></figure>
</li>
<li><p>$’’ strings, including \x/\octal/\u/\U escapes</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">: $<span class="string">'foo\u0040bar'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>multiline strings:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">echo</span> <span class="string">"line 1</span></span><br><span class="line"><span class="string">line 2"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>string literals that haven’t been finished:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">echo</span> <span class="string">"Hello, world</span></span><br></pre></td></tr></table></figure></li>
<li><p>command words that involve tilde expansion:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% ~/bin/foo</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Fixed-highlighting-of-3"><a href="#Fixed-highlighting-of-3" class="headerlink" title="Fixed highlighting of:"></a>Fixed highlighting of:</h2><ul>
<li><p>quoted command words:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% \ls</span><br></pre></td></tr></table></figure>
</li>
<li><p>backslash escapes in “” strings:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">echo</span> <span class="string">"\x41"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>noglob after command separator:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% :; <span class="built_in">noglob</span> <span class="built_in">echo</span> *</span><br></pre></td></tr></table></figure>
</li>
<li><p>glob after command separator, when the first command starts with ‘noglob’:</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">noglob</span> <span class="literal">true</span>; <span class="built_in">echo</span> *</span><br></pre></td></tr></table></figure>
</li>
<li><p>the region (vi visual mode / set-mark-command) (issue #165)</p>
</li>
<li><p>redirection and command separators that would be highlighted as <code>path_approx</code></p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">echo</span> foo;‸</span><br><span class="line">% <span class="built_in">echo</span> &lt;‸</span><br></pre></td></tr></table></figure>

<p>  (where <code>‸</code> represents the cursor location)</p>
</li>
<li><p>escaped globbing (outside quotes)</p>
  <figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">echo</span> \*</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="Other-changes-5"><a href="#Other-changes-5" class="headerlink" title="Other changes:"></a>Other changes:</h2><ul>
<li><p>implemented compatibility with zsh’s paste highlighting (issue #175)</p>
</li>
<li><p><code>$?</code> propagated correctly to wrapped widgets</p>
</li>
<li><p>don’t leak $REPLY into global scope</p>
</li>
</ul>
<h2 id="Developer-visible-changes-3"><a href="#Developer-visible-changes-3" class="headerlink" title="Developer-visible changes:"></a>Developer-visible changes:</h2><ul>
<li><p>added makefile with <code>install</code> and <code>test</code> targets</p>
</li>
<li><p>set <code>warn_create_global</code> internally</p>
</li>
<li><p>document release process</p>
</li>
</ul>
<h1 id="Version-0-2-1"><a href="#Version-0-2-1" class="headerlink" title="Version 0.2.1"></a>Version 0.2.1</h1><p>(Start of changelog.)</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/05/05/%E9%9A%8F%E7%AC%94%E5%BD%93%E5%9B%BD%E5%AD%A6/" rel="next" title="随笔当国学">
                <i class="fa fa-chevron-left"></i> 随笔当国学
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">6mad</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-HEAD"><span class="nav-number">1.</span> <span class="nav-text">Changes in HEAD</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Changes-fixed-as-part-of-the-switch-to-zle-line-pre-redraw"><span class="nav-number">1.1.</span> <span class="nav-text">Changes fixed as part of the switch to zle-line-pre-redraw</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-changes"><span class="nav-number">1.2.</span> <span class="nav-text">Other changes</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-0-8-0-alpha1-pre-redrawhook"><span class="nav-number">2.</span> <span class="nav-text">Changes in 0.8.0-alpha1-pre-redrawhook</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Notice-about-an-improbable-but-not-impossible-forward-incompatibility"><span class="nav-number">2.1.</span> <span class="nav-text">Notice about an improbable-but-not-impossible forward incompatibility</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Incompatible-changes"><span class="nav-number">2.2.</span> <span class="nav-text">Incompatible changes:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-changes-1"><span class="nav-number">2.3.</span> <span class="nav-text">Other changes:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-7-1"><span class="nav-number">3.</span> <span class="nav-text">Changes in version 0.7.1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-7-0"><span class="nav-number">4.</span> <span class="nav-text">Changes in version 0.7.0</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-6-0"><span class="nav-number">5.</span> <span class="nav-text">Changes in version 0.6.0</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-improvements"><span class="nav-number">5.1.</span> <span class="nav-text">Performance improvements:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Added-highlighting-of"><span class="nav-number">5.2.</span> <span class="nav-text">Added highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixed-highlighting-of"><span class="nav-number">5.3.</span> <span class="nav-text">Fixed highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API-changes-for-highlighter-authors"><span class="nav-number">5.4.</span> <span class="nav-text">API changes (for highlighter authors):</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Developer-visible-changes"><span class="nav-number">5.5.</span> <span class="nav-text">Developer-visible changes:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-changes-2"><span class="nav-number">5.6.</span> <span class="nav-text">Other changes:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-5-0"><span class="nav-number">6.</span> <span class="nav-text">Changes in version 0.5.0</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-improvements-1"><span class="nav-number">6.1.</span> <span class="nav-text">Performance improvements:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Added-highlighting-of-1"><span class="nav-number">6.2.</span> <span class="nav-text">Added highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixed-highlighting-of-1"><span class="nav-number">6.3.</span> <span class="nav-text">Fixed highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API-changes-for-highlighter-authors-1"><span class="nav-number">6.4.</span> <span class="nav-text">API changes (for highlighter authors):</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Developer-visible-changes-1"><span class="nav-number">6.5.</span> <span class="nav-text">Developer-visible changes:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-changes-3"><span class="nav-number">6.6.</span> <span class="nav-text">Other changes:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-4-1"><span class="nav-number">7.</span> <span class="nav-text">Changes in version 0.4.1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixes"><span class="nav-number">7.1.</span> <span class="nav-text">Fixes:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-4-0"><span class="nav-number">8.</span> <span class="nav-text">Changes in version 0.4.0</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Added-highlighting-of-2"><span class="nav-number">8.1.</span> <span class="nav-text">Added highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixed-highlighting-of-2"><span class="nav-number">8.2.</span> <span class="nav-text">Fixed highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Removed-features"><span class="nav-number">8.3.</span> <span class="nav-text">Removed features:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-changes-4"><span class="nav-number">8.4.</span> <span class="nav-text">Other changes:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Developer-visible-changes-2"><span class="nav-number">8.5.</span> <span class="nav-text">Developer-visible changes:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Changes-in-version-0-3-0"><span class="nav-number">9.</span> <span class="nav-text">Changes in version 0.3.0</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Added-highlighting-of-3"><span class="nav-number">9.1.</span> <span class="nav-text">Added highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fixed-highlighting-of-3"><span class="nav-number">9.2.</span> <span class="nav-text">Fixed highlighting of:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-changes-5"><span class="nav-number">9.3.</span> <span class="nav-text">Other changes:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Developer-visible-changes-3"><span class="nav-number">9.4.</span> <span class="nav-text">Developer-visible changes:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Version-0-2-1"><span class="nav-number">10.</span> <span class="nav-text">Version 0.2.1</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">6mad</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'https://fftu.tk/2021/05/05/changelog/';
          this.page.identifier = '2021/05/05/changelog/';
          this.page.title = 'changelog';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
